# ========================================
# FIX: Waybar AUTO, Claude-Launcher MANUAL
# ========================================
#
# PROBLEM:
# - Waybar startet nicht automatisch (obwohl exec-once existiert)
# - Claude-Launcher startet automatisch (soll aber manuell sein)
#
# ========================================
# ÄNDERUNGEN in home/preto/hypr/hyprland.conf:
# ========================================

# 1. WAYBAR AUTOSTART (exec-once Bereich):
# ----------------------------------------
# BEHALTEN/KORRIGIEREN:
exec-once = ~/.config/hypr/scripts/waybar-launcher.sh

# ODER falls waybar-launcher.sh fehlt, direkt:
exec-once = waybar --config ~/.config/waybar/config.jsonc --style ~/.config/waybar/style.css

# Fallback BEHALTEN (falls erster Start fehlschlägt):
exec-once = bash -c 'sleep 5 && pgrep waybar || waybar --config ~/.config/waybar/config.jsonc --style ~/.config/waybar/style.css'


# 2. CLAUDE-LAUNCHER AUTOSTART ENTFERNEN:
# ----------------------------------------
# DIESE ZEILE LÖSCHEN:
# exec-once = bash -lc 'while [ ! -f ~/.cache/wal/colors-kitty.conf ]; do sleep 0.1; done; kitty --class claudelauncher --title "Claude Launcher" -e bash -lc "~/.config/hypr/scripts/claude-launcher.sh; exec bash"'


# 3. CLAUDE-LAUNCHER MANUELL HINZUFÜGEN (bind Bereich):
# -------------------------------------------------------
# DIESE ZEILE HINZUFÜGEN:
bind = SUPER, C, exec, bash -lc 'kitty --class claudelauncher --title "Claude Launcher" -e bash -lc "~/.config/hypr/scripts/claude-launcher.sh; exec bash"'

# Alternative: Als Scratchpad (toggle mit SUPER+C):
# bind = SUPER, C, exec, bash -lc 'if pgrep -f "claudelauncher"; then hyprctl dispatch togglespecialworkspace claude; else kitty --class claudelauncher --title "Claude Launcher" -e bash -lc "~/.config/hypr/scripts/claude-launcher.sh; exec bash" & fi'


# ========================================
# WAYBAR DEBUG (falls immer noch nicht startet):
# ========================================
# Test manuell im Terminal:
#   waybar --config ~/.config/waybar/config.jsonc --style ~/.config/waybar/style.css
#
# Log checken:
#   journalctl --user -u waybar -f
#
# Prozess prüfen:
#   pgrep waybar && echo "Läuft" || echo "Läuft NICHT"
#
# Waybar-Launcher Skript prüfen:
#   cat ~/.config/hypr/scripts/waybar-launcher.sh
#
# ========================================
# ERGEBNIS:
# - Waybar startet AUTOMATISCH beim Boot
# - Claude-Launcher startet MANUELL mit SUPER+C
# ========================================
