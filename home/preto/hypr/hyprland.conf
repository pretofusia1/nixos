# Hyprland Config – final kompatibel mit v0.48.1

monitor=,preferred,auto,1

exec-once = waybar &
exec-once = dunst &
exec-once = nm-applet --indicator &

# Wallpaper einmal beim Login (Login-Shell, korrekter PATH)
exec-once = bash -lc "~/.config/hypr/scripts/wallpaper-wal.sh"

# Kitty erst starten, wenn Pywal die Kitty-Farben geschrieben hat
exec-once = bash -lc 'while [ ! -f ~/.cache/wal/colors-kitty.conf ]; do sleep 0.1; done; kitty --class archterm --hold -e bash -lc "~/.config/hypr/scripts/fastfetch-colored.sh"'
exec-once = bash -lc 'while [ ! -f ~/.cache/wal/colors.bpytop ]; do sleep 0.1; done; kitty --class monitorterm -e bash -lc "bpytop"'

input {
  kb_layout = de
  follow_mouse = 1
  touchpad {
    natural_scroll = true
  }
}

general {
  gaps_in = 6
  gaps_out = 12
  border_size = 2
  col.active_border = rgba(ffffff44) rgba(ffffff88) 45deg
  col.inactive_border = rgba(00000000)
  layout = dwindle
  windowrulev2 = opacity 0.95 0.95,class:.*
}

animations {
  enabled = true
  bezier = myBezier, 0.05, 0.9, 0.1, 1.05
  animation = windows, 1, 5, myBezier
  animation = fade, 1, 5, default
  animation = workspaces, 1, 6, default
}

decoration {
  rounding = 20

  blur {
    enabled = true
    size = 4       # leicht abgeschwächt
    passes = 1     # minimal
    vibrancy = 0.05
 }
}

dwindle {
  pseudotile = true
  preserve_split = true
}

misc {
  disable_hyprland_logo = true
  disable_splash_rendering = true
  force_default_wallpaper = 0
}

# Keybindings
bind = SUPER, T, exec, kitty
bind = SUPER, Q, killactive,
bind = SUPER, M, exit,
bind = SUPER, V, togglefloating,
bind = SUPER, F, fullscreen,
bind = SUPER, RETURN, exec, wofi --show drun
bind = SUPER, P, pseudo,
bind = SUPER, J, layoutmsg, cyclenext,
bind = SUPER, K, layoutmsg, cycleprev,
bind = SUPER, H, movefocus, l
bind = SUPER, L, movefocus, r
bind = SUPER, Up, movefocus, u
bind = SUPER, Down, movefocus, d
bind = SUPER, X, exec, ~/.config/wofi/powermenu.sh
bind = SUPER, left, workspace, -1
bind = SUPER, right, workspace, +1
bind = SUPER, S, exec, ~/.config/hypr/scripts/screenshot-full.sh
bind = SUPER_SHIFT, S, exec, ~/.config/hypr/scripts/screenshot-area.sh


# Firefox starten + zu Workspace 2 wechseln
bind = SUPER, W, exec, hyprctl dispatch workspace 2 && firefox

# Thunar starten + zu Workspace 3 wechseln
bind = SUPER, D, exec, hyprctl dispatch workspace 3 && thunar



# Fensterregeln
windowrulev2 = workspace 1,class:^(archterm)$
windowrulev2 = workspace 1,class:^(monitorterm)$
windowrulev2 = workspace 2,class:^(firefox)$
windowrulev2 = workspace 3,class:^(Thunar)$
windowrulev2 = float,class:^(archterm)$
windowrulev2 = float,class:^(monitorterm)$
windowrulev2 = opacity 0.88 0.88,class:^(archterm)$
windowrulev2 = opacity 0.88 0.88,class:^(monitorterm)$
windowrulev2 = opacity 1.00 1.00,class:^(firefox)$
windowrulev2 = opacity 0.40 0.40,class:^(Thunar)$

# ============================================================
# Claude Launcher - Autostart auf Workspace 4
# ============================================================
exec-once = bash -lc 'while [ ! -f ~/.cache/wal/colors-kitty.conf ]; do sleep 0.1; done; kitty --class claudelauncher --title "Claude Launcher" bash -c "$HOME/claude-launcher.sh; exec bash"'

# Window Rules für Claude Launcher
windowrulev2 = workspace 4 silent,class:^(claudelauncher)$
windowrulev2 = float,class:^(claudelauncher)$
windowrulev2 = size 1000 800,class:^(claudelauncher)$
windowrulev2 = center,class:^(claudelauncher)$
windowrulev2 = opacity 0.95 0.95,class:^(claudelauncher)$
